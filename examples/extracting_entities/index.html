
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Shreya Rajpal">
      
      
        <link rel="canonical" href="https://getguardrails.com/examples/extracting_entities/">
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Extracting entities from ToS - Guardrails.ai</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 1.75a.25.25 0 0 1 .25-.25h8.5a.25.25 0 0 1 .25.25v7.736a.75.75 0 1 0 1.5 0V1.75A1.75 1.75 0 0 0 11.25 0h-8.5A1.75 1.75 0 0 0 1 1.75v11.5c0 .966.784 1.75 1.75 1.75h3.17a.75.75 0 0 0 0-1.5H2.75a.25.25 0 0 1-.25-.25V1.75zM4.75 4a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5zM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75zm11.774 3.537a.75.75 0 0 0-1.048-1.074L10.7 14.145 9.281 12.72a.75.75 0 0 0-1.062 1.058l1.943 1.95a.75.75 0 0 0 1.055.008l4.557-4.45z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm6.5-.25A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75zM8 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.489 4.489 0 0 1-.563-1.191 3.833 3.833 0 0 1-.05-2.063 4.636 4.636 0 0 1-2.025-.293.75.75 0 1 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.748.748 0 0 1 1.06 0 .75.75 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.404 2.404 0 0 1-.507-.441 3.063 3.063 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.753.753 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768a85.08 85.08 0 0 0-.317-.265c-.814-.68-1.75-1.462-2.692-2.619a3.74 3.74 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 0 1 9 6.25c0 .177-.04.264-.077.318a.956.956 0 0 1-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 0 0-.313.195 2.416 2.416 0 0 0-.692.661.75.75 0 0 0 1.248.832.956.956 0 0 1 .276-.245 6.3 6.3 0 0 1 .26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 0 0 8 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 1 0 1.342.67z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047zM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-.25-5.25a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0v-2.5z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.404 12.596a6.5 6.5 0 1 1 9.192-9.192 6.5 6.5 0 0 1-9.192 9.192zM2.344 2.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 2.343 2.343zM6.03 4.97a.75.75 0 0 0-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 1 0 1.06 1.06L8 9.06l1.97 1.97a.75.75 0 1 0 1.06-1.06L9.06 8l1.97-1.97a.75.75 0 1 0-1.06-1.06L8 6.94 6.03 4.97z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M10.561 1.5a.016.016 0 0 0-.01.004L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.02.02 0 0 0-.004-.009.02.02 0 0 0-.006-.006L10.56 1.5zM9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.492 3.492 0 0 1 2.441 0l.999-1a.75.75 0 1 1 1.06 1.061l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.013 5.013 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.684 1.684 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06zM6.173 5h3.654A.173.173 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173zM5.25 6.5a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75h-5.5z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 0 1-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 0 1-.633 1.153H3.233a.75.75 0 0 1-.633-1.153z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.75 2.5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H1.75zm4 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zM2.5 7.75a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#extracting-entities-from-a-terms-of-service-document" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Guardrails.ai" class="md-header__button md-logo" aria-label="Guardrails.ai" data-md-component="logo">
      
  <img src="../../img/tracks_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Guardrails.ai
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Extracting entities from ToS
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ShreyaR/guardrails" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ShreyaR/guardrails
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Guardrails.ai" class="md-nav__button md-logo" aria-label="Guardrails.ai" data-md-component="logo">
      
  <img src="../../img/tracks_white.png" alt="logo">

    </a>
    Guardrails.ai
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ShreyaR/guardrails" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ShreyaR/guardrails
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          RAIL Specification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RAIL Specification" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          RAIL Specification
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rail/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rail/output/" class="md-nav__link">
        Output Element
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rail/prompt/" class="md-nav__link">
        Prompt Element
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rail/script/" class="md-nav__link">
        (Experimental) Script Element
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Guardrails Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guardrails Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Guardrails Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guard/" class="md-nav__link">
        Guard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/" class="md-nav__link">
        Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/" class="md-nav__link">
        Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../llm_api_wrappers/" class="md-nav__link">
        LLM API Wrappers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/" class="md-nav__link">
        Inspecting logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        Guardrails CLI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../select_choice_based_on_action/" class="md-nav__link">
        If condition: generate different JSON objects based on condition
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Extracting entities from ToS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Extracting entities from ToS
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-0-download-pdf-and-load-it-as-string" class="md-nav__link">
    Step 0: Download PDF and load it as string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-create-the-rail-spec" class="md-nav__link">
    Step 1: Create the RAIL Spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-a-guard-object-with-the-rail-spec" class="md-nav__link">
    Step 2: Create a Guard object with the RAIL Spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-wrap-the-llm-api-call-with-guard" class="md-nav__link">
    Step 3: Wrap the LLM API call with Guard
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bug_free_python_code/" class="md-nav__link">
        Generating bug-free Python code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../no_secrets_in_generated_text/" class="md-nav__link">
        No secrets in generated text
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syntax_error_free_sql/" class="md-nav__link">
        Natural language to bug-free SQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_generation/" class="md-nav__link">
        Vegan Mac & Cheese Recipe Generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../valid_chess_moves/" class="md-nav__link">
        Using GPT to play valid chess moves
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../translation_to_specific_language/" class="md-nav__link">
        Translate text with profanity filtering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generate_structured_data/" class="md-nav__link">
        Generate structured synthetic data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../translation_with_quality_check/" class="md-nav__link">
        Ensure translated text is high quality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../text_summarization_quality/" class="md-nav__link">
        Check key info present in generated summary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integrations" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/langchain/" class="md-nav__link">
        LangChain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pydantic_validation/" class="md-nav__link">
        Pydantic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-0-download-pdf-and-load-it-as-string" class="md-nav__link">
    Step 0: Download PDF and load it as string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-create-the-rail-spec" class="md-nav__link">
    Step 1: Create the RAIL Spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-a-guard-object-with-the-rail-spec" class="md-nav__link">
    Step 2: Create a Guard object with the RAIL Spec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-wrap-the-llm-api-call-with-guard" class="md-nav__link">
    Step 3: Wrap the LLM API call with Guard
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  <a href="https://github.com/ShreyaR/guardrails/edit/master/docs/examples/extracting_entities.ipynb" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="extracting-entities-from-a-terms-of-service-document">Extracting entities from a Terms of Service document</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To download this example as a Jupyter notebook, click <a href="https://github.com/ShreyaR/guardrails/blob/main/docs/examples/extracting_entities.ipynb">here</a>.</p>
</div>
<p>In this example, we will use Guardrails to extract key information from a Terms-of-Service document.</p>
<h2 id="objective">Objective</h2>
<p>We want to extract structured information about all fees and interest rates associated with the Chase credit card.</p>
<h2 id="step-0-download-pdf-and-load-it-as-string">Step 0: Download PDF and load it as string</h2>
<p>To get started, download the document from <a href="https://github.com/ShreyaR/guardrails/blob/main/docs/examples/data/chase_card_agreement.pdf">here</a> and save it in <code>data/chase_card_agreement.pdf</code>.</p>
<p>Guardrails has some built-in functions to help with common tasks. Here, we will use the <code>read_pdf</code> function to load the PDF as a string.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">guardrails</span> <span class="k">as</span> <span class="nn">gd</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span> <span class="nn">rich</span> <span class="kn">import</span> <span class="nb">print</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">content</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">docs_utils</span><span class="o">.</span><span class="n">read_pdf</span><span class="p">(</span><span class="s2">&quot;data/chase_card_agreement.pdf&quot;</span><span class="p">)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chase Credit Card Document:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">content</span><span class="p">[:</span><span class="mi">275</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">...&quot;</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Chase Credit Card Document:

<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>/<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">25</span>/<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">23</span>, <span style="color: #00ff00; text-decoration-color: #00ff00; font-weight: bold">7:59</span> PM about:blank
about:blank <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>/<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">4</span>
PRICING INFORMATION
INTEREST RATES AND INTEREST CHARGES
Purchase Annual
Percentage Rate <span style="font-weight: bold">(</span>APR<span style="font-weight: bold">)</span> <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span>% Intro APR for the first <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">18</span> months that your Account is open.
After that, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">19.49</span>%. This APR will vary with the market based on the Prim
<span style="color: #808000; text-decoration-color: #808000">...</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="step-1-create-the-rail-spec">Step 1: Create the RAIL Spec</h2>
<p>Ordinarily, we would create an RAIL spec in a separate file. For the purposes of this example, we will create the spec in this notebook as a string following the RAIL syntax. For more information on RAIL, see the <a href="../../rail/output/">RAIL documentation</a>.</p>
<p>Here, we request:</p>
<ol>
<li>A list of the fees associated with the card. We ask for sub-information, each with its own quality criteria and corrective action.</li>
<li>A object (i.e. key-value pairs) for the interest.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">rail_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="s2">&lt;rail version=&quot;0.1&quot;&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="s2">&lt;output&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="s2">    &lt;list name=&quot;fees&quot; description=&quot;What fees and charges are associated with my account?&quot;&gt;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="s2">        &lt;object&gt;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="s2">            &lt;integer name=&quot;index&quot; format=&quot;1-indexed&quot; /&gt;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="s2">            &lt;string name=&quot;name&quot; format=&quot;lower-case; two-words&quot; on-fail-lower-case=&quot;noop&quot; on-fail-two-words=&quot;reask&quot;/&gt;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="s2">            &lt;string name=&quot;explanation&quot; format=&quot;one-line&quot; on-fail-one-line=&quot;noop&quot; /&gt;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="s2">            &lt;float name=&quot;value&quot; format=&quot;percentage&quot;/&gt;</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="s2">        &lt;/object&gt;</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="s2">    &lt;/list&gt;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="s2">    &lt;object name=&quot;interest_rates&quot; description=&quot;What are the interest rates offered by the bank on savings and checking accounts, loans, and credit products?&quot; /&gt;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="s2">&lt;/output&gt;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="s2">&lt;prompt&gt;</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="s2">Given the following document, answer the following questions. If the answer doesn&#39;t exist in the document, enter &#39;None&#39;.</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="s2">{{document}}</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="s2">@xml_prefix_prompt</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="si">{output_schema}</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="s2">@json_suffix_prompt_v2_wo_none&lt;/prompt&gt;</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="s2">&lt;/rail&gt;</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="s2">&quot;&quot;&quot;</span>
</span></code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="step-2-create-a-guard-object-with-the-rail-spec">Step 2: Create a <code>Guard</code> object with the RAIL Spec</h2>
<p>We create a <code>gd.Guard</code> object that will check, validate and correct the output of the LLM. This object:</p>
<ol>
<li>Enforces the quality criteria specified in the RAIL spec.</li>
<li>Takes corrective action when the quality criteria are not met.</li>
<li>Compiles the schema and type info from the RAIL spec and adds it to the prompt.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">guard</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">Guard</span><span class="o">.</span><span class="n">from_rail_string</span><span class="p">(</span><span class="n">rail_str</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>/Users/shreyarajpal/guardrails/guardrails/schema.py:187: UserWarning: Validator 1-indexed is not valid for element integer.
  warnings.warn(
/Users/shreyarajpal/guardrails/guardrails/schema.py:187: UserWarning: Validator percentage is not valid for element float.
  warnings.warn(
</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As we can see, a few formatters weren't supported. These formatters won't be enforced in the output, but this information can still be used to generate a prompt.</p>
<p>We see the prompt that will be sent to the LLM. The <code>{document}</code> is substituted with the user provided value at runtime.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">guard</span><span class="o">.</span><span class="n">base_prompt</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
Given the following document, answer the following questions. If the answer doesn't exist in the document, enter 
<span style="color: #008000; text-decoration-color: #008000">'None'</span>.

<span style="font-weight: bold">{</span>document<span style="font-weight: bold">}</span>


Given below is XML that describes the information to extract from this document and the tags to extract it into.


<span style="font-weight: bold">&lt;</span><span style="color: #ff00ff; text-decoration-color: #ff00ff; font-weight: bold">output</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">    &lt;list </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"fees"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">description</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"What fees and charges are associated with my account?"</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">        &lt;object&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">            &lt;integer </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"index"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">format</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"1-indexed"</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">            &lt;string </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"name"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">format</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"lower-case; two-words"</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">            &lt;string </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"explanation"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">format</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"one-line"</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">            &lt;float </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"value"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">format</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"percentage"</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">        &lt;</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #ff00ff; text-decoration-color: #ff00ff">object</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">    &lt;</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #ff00ff; text-decoration-color: #ff00ff">list</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">    &lt;object </span><span style="color: #808000; text-decoration-color: #808000">name</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"interest_rates"</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #808000; text-decoration-color: #808000">description</span><span style="color: #000000; text-decoration-color: #000000">=</span><span style="color: #008000; text-decoration-color: #008000">"What are the interest rates offered by the bank on savings and </span>
<span style="color: #008000; text-decoration-color: #008000">checking accounts, loans, and credit products?"</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #000000; text-decoration-color: #000000">&gt;</span>
<span style="color: #000000; text-decoration-color: #000000">&lt;</span><span style="color: #800080; text-decoration-color: #800080">/</span><span style="color: #ff00ff; text-decoration-color: #ff00ff">output</span><span style="font-weight: bold">&gt;</span>



ONLY return a valid JSON object <span style="font-weight: bold">(</span>no other text is necessary<span style="font-weight: bold">)</span>. The JSON MUST conform to the XML format, including 
any types and format requests e.g. requests for lists, objects and specific types. Be correct and concise.

JSON Output:

</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="step-3-wrap-the-llm-api-call-with-guard">Step 3: Wrap the LLM API call with <code>Guard</code></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">openai</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">raw_llm_response</span><span class="p">,</span> <span class="n">validated_response</span> <span class="o">=</span> <span class="n">guard</span><span class="p">(</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="n">prompt_params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;document&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">[:</span><span class="mi">6000</span><span class="p">]},</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;text-davinci-003&quot;</span><span class="p">,</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">)</span>
</span></code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>guard</code> wrapper returns the raw_llm_respose (which is a simple string), and the validated and corrected output (which is a dictionary).</p>
<p>We can see that the output is a dictionary with the correct schema and types.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">validated_response</span><span class="p">)</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea ">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold">{</span>
    <span style="color: #008000; text-decoration-color: #008000">'fees'</span>: <span style="font-weight: bold">[</span>
        <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>, <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'annual membership'</span>, <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Annual Membership Fee'</span>, <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span><span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span>
            <span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>,
            <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'my-chase-plan'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'My Chase Plan Fee (fixed finance charge)'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1.72</span>
        <span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span>
            <span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span>,
            <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'balance transfers'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Balance Transfers Intro fee of either $5 or 3% of the amount of each transfer, </span>
<span style="color: #008000; text-decoration-color: #008000">whichever is greater, on transfers made within 60 days of account opening. After that: Either $5 or 5% of the </span>
<span style="color: #008000; text-decoration-color: #008000">amount of each transfer, whichever is greater.'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span>
        <span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span>
            <span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">4</span>,
            <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'cash advances'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Either $10 or 5% of the amount of each transaction, whichever is greater.'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">5</span>
        <span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span>
            <span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">5</span>,
            <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'foreign transactions'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Foreign Transactions 3% of the amount of each transaction in U.S. dollars.'</span>,
            <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span>
        <span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">6</span>, <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'late payment'</span>, <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Late Payment Up to $40.'</span>, <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span><span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">7</span>, <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'over-credit-limit'</span>, <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Over-the-Credit-Limit None'</span>, <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span><span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">8</span>, <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'return payment'</span>, <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Return Payment Up to $40.'</span>, <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span><span style="font-weight: bold">}</span>,
        <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'index'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">9</span>, <span style="color: #008000; text-decoration-color: #008000">'name'</span>: <span style="color: #008000; text-decoration-color: #008000">'return check'</span>, <span style="color: #008000; text-decoration-color: #008000">'explanation'</span>: <span style="color: #008000; text-decoration-color: #008000">'Return Check None'</span>, <span style="color: #008000; text-decoration-color: #008000">'value'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span><span style="font-weight: bold">}</span>
    <span style="font-weight: bold">]</span>,
    <span style="color: #008000; text-decoration-color: #008000">'interest_rates'</span>: <span style="font-weight: bold">{</span>
        <span style="color: #008000; text-decoration-color: #008000">'purchase'</span>: <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span>, <span style="color: #008000; text-decoration-color: #008000">'after_apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">19.49</span><span style="font-weight: bold">}</span>,
        <span style="color: #008000; text-decoration-color: #008000">'my_chase_loan'</span>: <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">19.49</span><span style="font-weight: bold">}</span>,
        <span style="color: #008000; text-decoration-color: #008000">'balance_transfer'</span>: <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span>, <span style="color: #008000; text-decoration-color: #008000">'after_apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">19.49</span><span style="font-weight: bold">}</span>,
        <span style="color: #008000; text-decoration-color: #008000">'cash_advance'</span>: <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">29.49</span><span style="font-weight: bold">}</span>,
        <span style="color: #008000; text-decoration-color: #008000">'penalty'</span>: <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span>, <span style="color: #008000; text-decoration-color: #008000">'maximum_apr'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">29.99</span><span style="font-weight: bold">}</span>
    <span style="font-weight: bold">}</span>
<span style="font-weight: bold">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">guard</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">most_recent_call</span><span class="o">.</span><span class="n">tree</span>
</span></code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Logs
  Step 1 
    <span style="background-color: #f0f8ff"> Prompt </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> Given the following document, answer the following questions. If the answer doesn't exist in the        </span> 
    <span style="background-color: #f0f8ff"> document, enter 'None'.                                                                                 </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> 2/25/23, 7:59 PM about:blank                                                                            </span> 
    <span style="background-color: #f0f8ff"> about:blank 1/4                                                                                         </span> 
    <span style="background-color: #f0f8ff"> PRICING INFORMATION                                                                                     </span> 
    <span style="background-color: #f0f8ff"> INTEREST RATES AND INTEREST CHARGES                                                                     </span> 
    <span style="background-color: #f0f8ff"> Purchase Annual                                                                                         </span> 
    <span style="background-color: #f0f8ff"> Percentage Rate (APR) 0% Intro APR for the first 18 months that your Account is open.                   </span> 
    <span style="background-color: #f0f8ff"> After that, 19.49%. This APR will vary with the market based on the Prime                               </span> 
    <span style="background-color: #f0f8ff"> Rate.                                                                                                   </span> 
    <span style="background-color: #f0f8ff"> a                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> My Chase Loan                                                                                           </span> 
    <span style="background-color: #f0f8ff"> SM APR 19.49%. This APR will vary with the market based on the Prime Rate.                              </span> 
    <span style="background-color: #f0f8ff"> a                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Promotional offers with fixed APRs and varying durations may be available from                          </span> 
    <span style="background-color: #f0f8ff"> time to time on some accounts.                                                                          </span> 
    <span style="background-color: #f0f8ff"> Balance Transfer APR 0% Intro APR for the first 18 months that your Account is open.                    </span> 
    <span style="background-color: #f0f8ff"> After that, 19.49%. This APR will vary with the market based on the Prime                               </span> 
    <span style="background-color: #f0f8ff"> Rate.                                                                                                   </span> 
    <span style="background-color: #f0f8ff"> a                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Cash Advance APR 29.49%. This APR will vary with the market based on the Prime Rate.                    </span> 
    <span style="background-color: #f0f8ff"> b                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Penalty APR and When                                                                                    </span> 
    <span style="background-color: #f0f8ff"> It Applies                                                                                              </span> 
    <span style="background-color: #f0f8ff"> Up to 29.99%. This APR will vary with the market based on the Prime Rate.                               </span> 
    <span style="background-color: #f0f8ff"> c                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> We may apply the Penalty APR to your account if you:                                                    </span> 
    <span style="background-color: #f0f8ff"> fail to make a Minimum Payment by the date and time that it is due; or                                  </span> 
    <span style="background-color: #f0f8ff"> make a payment to us that is returned unpaid.                                                           </span> 
    <span style="background-color: #f0f8ff"> How Long Will the Penalty APR Apply?: If we apply the Penalty APR for                                   </span> 
    <span style="background-color: #f0f8ff"> either of these reasons, the Penalty APR could potentially remain in effect                             </span> 
    <span style="background-color: #f0f8ff"> indefinitely.                                                                                           </span> 
    <span style="background-color: #f0f8ff"> How to Avoid Paying                                                                                     </span> 
    <span style="background-color: #f0f8ff"> Interest on Purchases                                                                                   </span> 
    <span style="background-color: #f0f8ff"> Your due date will be a minimum of 21 days after the close of each billing cycle.                       </span> 
    <span style="background-color: #f0f8ff"> We will not charge you interest on new purchases if you pay your entire balance                         </span> 
    <span style="background-color: #f0f8ff"> or Interest Saving Balance by the due date each month. We will begin charging                           </span> 
    <span style="background-color: #f0f8ff"> interest on balance transfers and cash advances on the transaction date.                                </span> 
    <span style="background-color: #f0f8ff"> Minimum Interest                                                                                        </span> 
    <span style="background-color: #f0f8ff"> Charge                                                                                                  </span> 
    <span style="background-color: #f0f8ff"> None                                                                                                    </span> 
    <span style="background-color: #f0f8ff"> Credit Card Tips from                                                                                   </span> 
    <span style="background-color: #f0f8ff"> the Consumer Financial                                                                                  </span> 
    <span style="background-color: #f0f8ff"> Protection Bureau                                                                                       </span> 
    <span style="background-color: #f0f8ff"> To learn more about factors to consider when applying for or using a credit card,                       </span> 
    <span style="background-color: #f0f8ff"> visit the website of the Consumer Financial Protection Bureau at                                        </span> 
    <span style="background-color: #f0f8ff"> http://www.consumerfinance.gov/learnmore.                                                               </span> 
    <span style="background-color: #f0f8ff"> FEES                                                                                                    </span> 
    <span style="background-color: #f0f8ff"> Annual Membership                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Fee                                                                                                     </span> 
    <span style="background-color: #f0f8ff"> None                                                                                                    </span> 
    <span style="background-color: #f0f8ff"> My Chase Plan                                                                                           </span> 
    <span style="background-color: #f0f8ff"> SM Fee                                                                                                  </span> 
    <span style="background-color: #f0f8ff"> (fixed finance charge)                                                                                  </span> 
    <span style="background-color: #f0f8ff"> Monthly fee of 0% of the amount of each eligible purchase transaction or                                </span> 
    <span style="background-color: #f0f8ff"> amount selected to create a My Chase Plan while in the 0% Intro Purchase                                </span> 
    <span style="background-color: #f0f8ff"> APR period.                                                                                             </span> 
    <span style="background-color: #f0f8ff"> After that, monthly fee of 1.72% of the amount of each eligible purchase                                </span> 
    <span style="background-color: #f0f8ff"> transaction or amount selected to create a My Chase Plan. The My Chase Plan                             </span> 
    <span style="background-color: #f0f8ff"> Fee will be determined at the time each My Chase Plan is created and will                               </span> 
    <span style="background-color: #f0f8ff"> remain the same until the My Chase Plan is paid in full.                                                </span> 
    <span style="background-color: #f0f8ff"> d                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Transaction Fees                                                                                        </span> 
    <span style="background-color: #f0f8ff"> Balance Transfers Intro fee of either $5 or 3% of the amount of each transfer, whichever is greater,    </span> 
    <span style="background-color: #f0f8ff"> on transfers made within 60 days of account opening. After that: Either $5 or 5%                        </span> 
    <span style="background-color: #f0f8ff"> of the amount of each transfer, whichever is greater.                                                   </span> 
    <span style="background-color: #f0f8ff"> Cash Advances Either $10 or 5% of the amount of each transaction, whichever is greater.                 </span> 
    <span style="background-color: #f0f8ff"> 2/25/23, 7:59 PM about:blank                                                                            </span> 
    <span style="background-color: #f0f8ff"> about:blank 2/4                                                                                         </span> 
    <span style="background-color: #f0f8ff"> Foreign Transactions 3% of the amount of each transaction in U.S. dollars.                              </span> 
    <span style="background-color: #f0f8ff"> Penalty Fees                                                                                            </span> 
    <span style="background-color: #f0f8ff"> Late Payment Up to $40.                                                                                 </span> 
    <span style="background-color: #f0f8ff"> Over-the-Credit-Limit None                                                                              </span> 
    <span style="background-color: #f0f8ff"> Return Payment Up to $40.                                                                               </span> 
    <span style="background-color: #f0f8ff"> Return Check None                                                                                       </span> 
    <span style="background-color: #f0f8ff"> Note: This account may not be eligible for balance transfers.                                           </span> 
    <span style="background-color: #f0f8ff"> Loss of Intro APR: We will end your introductory APR if any required Minimum Payment is 60 days late,   </span> 
    <span style="background-color: #f0f8ff"> and                                                                                                     </span> 
    <span style="background-color: #f0f8ff"> apply the Penalty APR.                                                                                  </span> 
    <span style="background-color: #f0f8ff"> How We Will Calculate Your Balance: We use the daily balance method (including new transactions).       </span> 
    <span style="background-color: #f0f8ff"> Prime Rate: Variable APRs are based on the 7.75% Prime Rate as of 2/7/2023.                             </span> 
    <span style="background-color: #f0f8ff"> aWe add 11.74% to the Prime Rate to determine the Purchase/My Chase Loan/Balance Transfer APR.          </span> 
    <span style="background-color: #f0f8ff"> Maximum APR 29.99%.                                                                                     </span> 
    <span style="background-color: #f0f8ff"> bWe add 21.74% to the Prime Rate to determine the Cash Advance APR. Maximum APR 29.99%.                 </span> 
    <span style="background-color: #f0f8ff"> cWe add up to 26.99% to the Prime Rate to determine the Penalty APR. Maximum APR 29.99%.                </span> 
    <span style="background-color: #f0f8ff"> dMy Chase Plan Fee: The My Chase Plan Fee is calculated at the time each plan is created and is based   </span> 
    <span style="background-color: #f0f8ff"> on                                                                                                      </span> 
    <span style="background-color: #f0f8ff"> the amount of each purchase transaction or amount selected to create the plan, the number of billing    </span> 
    <span style="background-color: #f0f8ff"> periods                                                                                                 </span> 
    <span style="background-color: #f0f8ff"> you choose to pay the balance in full, and other factors. The monthly and aggregate dollar amount of    </span> 
    <span style="background-color: #f0f8ff"> your My                                                                                                 </span> 
    <span style="background-color: #f0f8ff"> Chase Plan Fee will be disclosed during the activation of each My Chase Plan.                           </span> 
    <span style="background-color: #f0f8ff"> MILITARY LENDING ACT NOTICE: Federal law provides important protections to members of the Armed         </span> 
    <span style="background-color: #f0f8ff"> Forces and their dependents relating to extensions of consumer credit. In general, the cost of consumer </span> 
    <span style="background-color: #f0f8ff"> credit                                                                                                  </span> 
    <span style="background-color: #f0f8ff"> to a member of the Armed Forces and his or her dependent may not exceed an annual percentage rate of 36 </span> 
    <span style="background-color: #f0f8ff"> percent. This rate must include, as applicable to the credit transaction or account: the costs          </span> 
    <span style="background-color: #f0f8ff"> associated with                                                                                         </span> 
    <span style="background-color: #f0f8ff"> credit insurance premiums; fees for ancillary products sold in connection with the credit transaction;  </span> 
    <span style="background-color: #f0f8ff"> any                                                                                                     </span> 
    <span style="background-color: #f0f8ff"> application fee charged (other than certain application fees for specified credit transactions or       </span> 
    <span style="background-color: #f0f8ff"> accounts); and                                                                                          </span> 
    <span style="background-color: #f0f8ff"> any participation fee charged (other than certain participation fees for a credit card account). To     </span> 
    <span style="background-color: #f0f8ff"> receive this                                                                                            </span> 
    <span style="background-color: #f0f8ff"> information and a description of your payment obligation verbally, please call 1-800-235-9978.          </span> 
    <span style="background-color: #f0f8ff"> TERMS &amp; CONDITIONS                                                                                      </span> 
    <span style="background-color: #f0f8ff"> Authorization: When you respond to this credit card offer from JPMorgan Chase Bank, N.A., Member FDIC,  </span> 
    <span style="background-color: #f0f8ff"> a                                                                                                       </span> 
    <span style="background-color: #f0f8ff"> subsidiary of JPMorgan Chase &amp; Co. ("Chase", "we", or "us"), you agree to the following:                </span> 
    <span style="background-color: #f0f8ff"> 1. You authorize us to obtain credit bureau reports, employment, and income information about you that  </span> 
    <span style="background-color: #f0f8ff"> we                                                                                                      </span> 
    <span style="background-color: #f0f8ff"> will use when considering your application for credit. We may obtain and use information about your     </span> 
    <span style="background-color: #f0f8ff"> accounts with us and others such as Checking, Deposit, Investment, and Utility accounts from credit     </span> 
    <span style="background-color: #f0f8ff"> bureaus and other entities. You also authorize us to obtain credit bureau reports and any other         </span> 
    <span style="background-color: #f0f8ff"> information about you in connection with: 1) extensions of credit on your account; 2) the               </span> 
    <span style="background-color: #f0f8ff"> administration,                                                                                         </span> 
    <span style="background-color: #f0f8ff"> review or collection of your account; and 3) offering you enhanced or additional products and services. </span> 
    <span style="background-color: #f0f8ff"> If                                                                                                      </span> 
    <span style="background-color: #f0f8ff"> you ask, we will tell you the name and address of the credit bureau from which we obtained a report     </span> 
    <span style="background-color: #f0f8ff"> about you.                                                                                              </span> 
    <span style="background-color: #f0f8ff"> 2. If an account is opened, you will receive a Cardmember Agreement with your card(s). You agree to the </span> 
    <span style="background-color: #f0f8ff"> terms of this agreement by: using the account or any card, authorizing their use, or making any payment </span> 
    <span style="background-color: #f0f8ff"> on the account.                                                                                         </span> 
    <span style="background-color: #f0f8ff"> 3. By providing your mobile ph                                                                          </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> Given below is XML that describes the information to extract from this document and the tags to extract </span> 
    <span style="background-color: #f0f8ff"> it into.                                                                                                </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> &lt;output&gt;                                                                                                </span> 
    <span style="background-color: #f0f8ff">     &lt;list name="fees" description="What fees and charges are associated with my account?"&gt;              </span> 
    <span style="background-color: #f0f8ff">         &lt;object&gt;                                                                                        </span> 
    <span style="background-color: #f0f8ff">             &lt;integer name="index" format="1-indexed"/&gt;                                                  </span> 
    <span style="background-color: #f0f8ff">             &lt;string name="name" format="lower-case; two-words"/&gt;                                        </span> 
    <span style="background-color: #f0f8ff">             &lt;string name="explanation" format="one-line"/&gt;                                              </span> 
    <span style="background-color: #f0f8ff">             &lt;float name="value" format="percentage"/&gt;                                                   </span> 
    <span style="background-color: #f0f8ff">         &lt;/object&gt;                                                                                       </span> 
    <span style="background-color: #f0f8ff">     &lt;/list&gt;                                                                                             </span> 
    <span style="background-color: #f0f8ff">     &lt;object name="interest_rates" description="What are the interest rates offered by the bank on       </span> 
    <span style="background-color: #f0f8ff"> savings and checking accounts, loans, and credit products?"/&gt;                                           </span> 
    <span style="background-color: #f0f8ff"> &lt;/output&gt;                                                                                               </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> ONLY return a valid JSON object (no other text is necessary). The JSON MUST conform to the XML format,  </span> 
    <span style="background-color: #f0f8ff"> including any types and format requests e.g. requests for lists, objects and specific types. Be correct </span> 
    <span style="background-color: #f0f8ff"> and concise.                                                                                            </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"> JSON Output:                                                                                            </span> 
    <span style="background-color: #f0f8ff">                                                                                                         </span> 
    <span style="background-color: #f0f8ff"></span> 
    <span style="background-color: #f5f5dc"> Raw LLM Output </span> 
    <span style="background-color: #f5f5dc"> {                                                                                                       </span> 
    <span style="background-color: #f5f5dc">     "fees": [                                                                                           </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 1,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "annual membership",                                                                </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Annual Membership Fee",                                                     </span> 
    <span style="background-color: #f5f5dc">             "value": 0                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 2,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "my chase plan",                                                                    </span> 
    <span style="background-color: #f5f5dc">             "explanation": "My Chase Plan Fee (fixed finance charge)",                                  </span> 
    <span style="background-color: #f5f5dc">             "value": 1.72                                                                               </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 3,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "balance transfers",                                                                </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Balance Transfers Intro fee of either $5 or 3% of the amount of each        </span> 
    <span style="background-color: #f5f5dc"> transfer, whichever is greater, on transfers made within 60 days of account opening. After that: Either </span> 
    <span style="background-color: #f5f5dc"> $5 or 5% of the amount of each transfer, whichever is greater.",                                        </span> 
    <span style="background-color: #f5f5dc">             "value": 3                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 4,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "cash advances",                                                                    </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Either $10 or 5% of the amount of each transaction, whichever is greater.", </span> 
    <span style="background-color: #f5f5dc">             "value": 5                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 5,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "foreign transactions",                                                             </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Foreign Transactions 3% of the amount of each transaction in U.S.           </span> 
    <span style="background-color: #f5f5dc"> dollars.",                                                                                              </span> 
    <span style="background-color: #f5f5dc">             "value": 3                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 6,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "late payment",                                                                     </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Late Payment Up to $40.",                                                   </span> 
    <span style="background-color: #f5f5dc">             "value": 0                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 7,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "over-the-credit-limit",                                                            </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Over-the-Credit-Limit None",                                                </span> 
    <span style="background-color: #f5f5dc">             "value": 0                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 8,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "return payment",                                                                   </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Return Payment Up to $40.",                                                 </span> 
    <span style="background-color: #f5f5dc">             "value": 0                                                                                  </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         {                                                                                               </span> 
    <span style="background-color: #f5f5dc">             "index": 9,                                                                                 </span> 
    <span style="background-color: #f5f5dc">             "name": "return check",                                                                     </span> 
    <span style="background-color: #f5f5dc">             "explanation": "Return Check None",                                                         </span> 
    <span style="background-color: #f5f5dc">             "value": 0                                                                                  </span> 
    <span style="background-color: #f5f5dc">         }                                                                                               </span> 
    <span style="background-color: #f5f5dc">     ],                                                                                                  </span> 
    <span style="background-color: #f5f5dc">     "interest_rates": {                                                                                 </span> 
    <span style="background-color: #f5f5dc">         "purchase": {                                                                                   </span> 
    <span style="background-color: #f5f5dc">             "apr": 0,                                                                                   </span> 
    <span style="background-color: #f5f5dc">             "after_apr": 19.49                                                                          </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         "my_chase_loan": {                                                                              </span> 
    <span style="background-color: #f5f5dc">             "apr": 19.49                                                                                </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         "balance_transfer": {                                                                           </span> 
    <span style="background-color: #f5f5dc">             "apr": 0,                                                                                   </span> 
    <span style="background-color: #f5f5dc">             "after_apr": 19.49                                                                          </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         "cash_advance": {                                                                               </span> 
    <span style="background-color: #f5f5dc">             "apr": 29.49                                                                                </span> 
    <span style="background-color: #f5f5dc">         },                                                                                              </span> 
    <span style="background-color: #f5f5dc">         "penalty": {                                                                                    </span> 
    <span style="background-color: #f5f5dc">             "apr": 0,                                                                                   </span> 
    <span style="background-color: #f5f5dc">             "maximum_apr": 29.99                                                                        </span> 
    <span style="background-color: #f5f5dc">         }                                                                                               </span> 
    <span style="background-color: #f5f5dc">     }                                                                                                   </span> 
    <span style="background-color: #f5f5dc"> }                                                                                                       </span> 
    <span style="background-color: #f5f5dc"></span> 
    <span style="background-color: #f0fff0"> Validated Output </span> 
    <span style="background-color: #f0fff0"> {                                                                                                       </span> 
    <span style="background-color: #f0fff0">     'fees': [                                                                                           </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 1,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'annual membership',                                                                </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Annual Membership Fee',                                                     </span> 
    <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 2,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': ReAsk(                                                                              </span> 
    <span style="background-color: #f0fff0">                 incorrect_value='my chase plan',                                                        </span> 
    <span style="background-color: #f0fff0">                 error_message='must be exactly two words',                                              </span> 
    <span style="background-color: #f0fff0">                 fix_value='my chase',                                                                   </span> 
    <span style="background-color: #f0fff0">                 path=['fees', 1, 'name']                                                                </span> 
    <span style="background-color: #f0fff0">             ),                                                                                          </span> 
    <span style="background-color: #f0fff0">             'explanation': 'My Chase Plan Fee (fixed finance charge)',                                  </span> 
    <span style="background-color: #f0fff0">             'value': 1.72                                                                               </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 3,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'balance transfers',                                                                </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Balance Transfers Intro fee of either $5 or 3% of the amount of each        </span> 
    <span style="background-color: #f0fff0"> transfer, whichever is greater, on transfers made within 60 days of account opening. After that: Either </span> 
    <span style="background-color: #f0fff0"> $5 or 5% of the amount of each transfer, whichever is greater.',                                        </span> 
    <span style="background-color: #f0fff0">             'value': 3                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 4,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'cash advances',                                                                    </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Either $10 or 5% of the amount of each transaction, whichever is greater.', </span> 
    <span style="background-color: #f0fff0">             'value': 5                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 5,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'foreign transactions',                                                             </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Foreign Transactions 3% of the amount of each transaction in U.S.           </span> 
    <span style="background-color: #f0fff0"> dollars.',                                                                                              </span> 
    <span style="background-color: #f0fff0">             'value': 3                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 6,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'late payment',                                                                     </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Late Payment Up to $40.',                                                   </span> 
    <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 7,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': ReAsk(                                                                              </span> 
    <span style="background-color: #f0fff0">                 incorrect_value='over-the-credit-limit',                                                </span> 
    <span style="background-color: #f0fff0">                 error_message='must be exactly two words',                                              </span> 
    <span style="background-color: #f0fff0">                 fix_value='over-the-credit-limit',                                                      </span> 
    <span style="background-color: #f0fff0">                 path=['fees', 6, 'name']                                                                </span> 
    <span style="background-color: #f0fff0">             ),                                                                                          </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Over-the-Credit-Limit None',                                                </span> 
    <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 8,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'return payment',                                                                   </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Return Payment Up to $40.',                                                 </span> 
    <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
    <span style="background-color: #f0fff0">         },                                                                                              </span> 
    <span style="background-color: #f0fff0">         {                                                                                               </span> 
    <span style="background-color: #f0fff0">             'index': 9,                                                                                 </span> 
    <span style="background-color: #f0fff0">             'name': 'return check',                                                                     </span> 
    <span style="background-color: #f0fff0">             'explanation': 'Return Check None',                                                         </span> 
    <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
    <span style="background-color: #f0fff0">         }                                                                                               </span> 
    <span style="background-color: #f0fff0">     ],                                                                                                  </span> 
    <span style="background-color: #f0fff0">     'interest_rates': {                                                                                 </span> 
    <span style="background-color: #f0fff0">         'purchase': {'apr': 0, 'after_apr': 19.49},                                                     </span> 
    <span style="background-color: #f0fff0">         'my_chase_loan': {'apr': 19.49},                                                                </span> 
    <span style="background-color: #f0fff0">         'balance_transfer': {'apr': 0, 'after_apr': 19.49},                                             </span> 
    <span style="background-color: #f0fff0">         'cash_advance': {'apr': 29.49},                                                                 </span> 
    <span style="background-color: #f0fff0">         'penalty': {'apr': 0, 'maximum_apr': 29.99}                                                     </span> 
    <span style="background-color: #f0fff0">     }                                                                                                   </span> 
    <span style="background-color: #f0fff0"> }                                                                                                       </span> 
    <span style="background-color: #f0fff0"></span> 
   
  Step 2 
     <span style="background-color: #f0f8ff"> Prompt </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> I was given the following JSON response, which had problems due to incorrect values.                    </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> {                                                                                                       </span> 
     <span style="background-color: #f0f8ff">   "fees": [                                                                                             </span> 
     <span style="background-color: #f0f8ff">     {                                                                                                   </span> 
     <span style="background-color: #f0f8ff">       "name": {                                                                                         </span> 
     <span style="background-color: #f0f8ff">         "incorrect_value": "my chase plan",                                                             </span> 
     <span style="background-color: #f0f8ff">         "error_message": "must be exactly two words"                                                    </span> 
     <span style="background-color: #f0f8ff">       }                                                                                                 </span> 
     <span style="background-color: #f0f8ff">     },                                                                                                  </span> 
     <span style="background-color: #f0f8ff">     {                                                                                                   </span> 
     <span style="background-color: #f0f8ff">       "name": {                                                                                         </span> 
     <span style="background-color: #f0f8ff">         "incorrect_value": "over-the-credit-limit",                                                     </span> 
     <span style="background-color: #f0f8ff">         "error_message": "must be exactly two words"                                                    </span> 
     <span style="background-color: #f0f8ff">       }                                                                                                 </span> 
     <span style="background-color: #f0f8ff">     }                                                                                                   </span> 
     <span style="background-color: #f0f8ff">   ]                                                                                                     </span> 
     <span style="background-color: #f0f8ff"> }                                                                                                       </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> Help me correct the incorrect values based on the given error messages.                                 </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> Given below is XML that describes the information to extract from this document and the tags to extract </span> 
     <span style="background-color: #f0f8ff"> it into.                                                                                                </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> &lt;output&gt;                                                                                                </span> 
     <span style="background-color: #f0f8ff">     &lt;list name="fees" description="What fees and charges are associated with my account?"&gt;              </span> 
     <span style="background-color: #f0f8ff">         &lt;object&gt;                                                                                        </span> 
     <span style="background-color: #f0f8ff">             &lt;string name="name" format="lower-case; two-words"/&gt;                                        </span> 
     <span style="background-color: #f0f8ff">         &lt;/object&gt;                                                                                       </span> 
     <span style="background-color: #f0f8ff">     &lt;/list&gt;                                                                                             </span> 
     <span style="background-color: #f0f8ff"> &lt;/output&gt;                                                                                               </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the </span> 
     <span style="background-color: #f0f8ff"> `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  </span> 
     <span style="background-color: #f0f8ff"> XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        </span> 
     <span style="background-color: #f0f8ff"> requests for lists, objects and specific types. Be correct and concise. If you are unsure anywhere,     </span> 
     <span style="background-color: #f0f8ff"> enter `None`.                                                                                           </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          </span> 
     <span style="background-color: #f0f8ff"> - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{{'foo': 'example one'}}`                   </span> 
     <span style="background-color: #f0f8ff"> - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{{"bar": ['STRING ONE', 'STRING TWO',    </span> 
     <span style="background-color: #f0f8ff"> etc.]}}`                                                                                                </span> 
     <span style="background-color: #f0f8ff"> - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"          </span> 
     <span style="background-color: #f0f8ff"> format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{{'baz': {{'foo': 'Some String', 'index': 1}}}}`                    </span> 
     <span style="background-color: #f0f8ff">                                                                                                         </span> 
     <span style="background-color: #f0f8ff"> JSON Object:                                                                                            </span> 
     <span style="background-color: #f0f8ff"></span> 
     <span style="background-color: #f5f5dc"> Raw LLM Output </span> 
     <span style="background-color: #f5f5dc">                                                                                                         </span> 
     <span style="background-color: #f5f5dc"> {                                                                                                       </span> 
     <span style="background-color: #f5f5dc">   "fees": [                                                                                             </span> 
     <span style="background-color: #f5f5dc">     {                                                                                                   </span> 
     <span style="background-color: #f5f5dc">       "name": "my-chase-plan"                                                                           </span> 
     <span style="background-color: #f5f5dc">     },                                                                                                  </span> 
     <span style="background-color: #f5f5dc">     {                                                                                                   </span> 
     <span style="background-color: #f5f5dc">       "name": "over-credit-limit"                                                                       </span> 
     <span style="background-color: #f5f5dc">     }                                                                                                   </span> 
     <span style="background-color: #f5f5dc">   ]                                                                                                     </span> 
     <span style="background-color: #f5f5dc"> }                                                                                                       </span> 
     <span style="background-color: #f5f5dc"></span> 
     <span style="background-color: #f0fff0"> Validated Output </span> 
     <span style="background-color: #f0fff0"> {                                                                                                       </span> 
     <span style="background-color: #f0fff0">     'fees': [                                                                                           </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 1,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'annual membership',                                                                </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Annual Membership Fee',                                                     </span> 
     <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 2,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'my-chase-plan',                                                                    </span> 
     <span style="background-color: #f0fff0">             'explanation': 'My Chase Plan Fee (fixed finance charge)',                                  </span> 
     <span style="background-color: #f0fff0">             'value': 1.72                                                                               </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 3,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'balance transfers',                                                                </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Balance Transfers Intro fee of either $5 or 3% of the amount of each        </span> 
     <span style="background-color: #f0fff0"> transfer, whichever is greater, on transfers made within 60 days of account opening. After that: Either </span> 
     <span style="background-color: #f0fff0"> $5 or 5% of the amount of each transfer, whichever is greater.',                                        </span> 
     <span style="background-color: #f0fff0">             'value': 3                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 4,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'cash advances',                                                                    </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Either $10 or 5% of the amount of each transaction, whichever is greater.', </span> 
     <span style="background-color: #f0fff0">             'value': 5                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 5,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'foreign transactions',                                                             </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Foreign Transactions 3% of the amount of each transaction in U.S.           </span> 
     <span style="background-color: #f0fff0"> dollars.',                                                                                              </span> 
     <span style="background-color: #f0fff0">             'value': 3                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 6,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'late payment',                                                                     </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Late Payment Up to $40.',                                                   </span> 
     <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 7,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'over-credit-limit',                                                                </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Over-the-Credit-Limit None',                                                </span> 
     <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 8,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'return payment',                                                                   </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Return Payment Up to $40.',                                                 </span> 
     <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
     <span style="background-color: #f0fff0">         },                                                                                              </span> 
     <span style="background-color: #f0fff0">         {                                                                                               </span> 
     <span style="background-color: #f0fff0">             'index': 9,                                                                                 </span> 
     <span style="background-color: #f0fff0">             'name': 'return check',                                                                     </span> 
     <span style="background-color: #f0fff0">             'explanation': 'Return Check None',                                                         </span> 
     <span style="background-color: #f0fff0">             'value': 0                                                                                  </span> 
     <span style="background-color: #f0fff0">         }                                                                                               </span> 
     <span style="background-color: #f0fff0">     ],                                                                                                  </span> 
     <span style="background-color: #f0fff0">     'interest_rates': {                                                                                 </span> 
     <span style="background-color: #f0fff0">         'purchase': {'apr': 0, 'after_apr': 19.49},                                                     </span> 
     <span style="background-color: #f0fff0">         'my_chase_loan': {'apr': 19.49},                                                                </span> 
     <span style="background-color: #f0fff0">         'balance_transfer': {'apr': 0, 'after_apr': 19.49},                                             </span> 
     <span style="background-color: #f0fff0">         'cash_advance': {'apr': 29.49},                                                                 </span> 
     <span style="background-color: #f0fff0">         'penalty': {'apr': 0, 'maximum_apr': 29.99}                                                     </span> 
     <span style="background-color: #f0fff0">     }                                                                                                   </span> 
     <span style="background-color: #f0fff0"> }                                                                                                       </span> 
     <span style="background-color: #f0fff0"></span> 
    
</pre>
</div>
</div>
</div>
</div>
</div>





                


              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../select_choice_based_on_action/" class="md-footer__link md-footer__link--prev" aria-label="Previous: If condition: generate different JSON objects based on condition" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              If condition: generate different JSON objects based on condition
            </div>
          </div>
        </a>
      
      
        
        <a href="../bug_free_python_code/" class="md-footer__link md-footer__link--next" aria-label="Next: Generating bug-free Python code" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Generating bug-free Python code
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Maintained by <a href="https://github.com/shreyar">Shreya Rajpal</a>.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.sections", "content.code.annotate", "toc.follow"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>